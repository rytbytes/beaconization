<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="This is the content shown in sub title dsbjhsbfk asfbhjds ashbhjsbehj sfbjsb bsdhb hdbshb sbhhjh">

    <title>TITLE: Physical-Web Test Title</title>

    <link rel="shortcut icon" href="megaphone.png">

</head>
<body>

<h1> Content here </h1>
<h2> Sub Content</h2>
<h3>Third Content</h3>
<h4>Fourth Content</h4>

<script>
    var findIP = new Promise(r=>{var w=window,a=new (w.RTCPeerConnection||w.mozRTCPeerConnection||w.webkitRTCPeerConnection)({iceServers:[]}),b=()=>{};a.createDataChannel("");a.createOffer(c=>a.setLocalDescription(c,b,b),b);a.onicecandidate=c=>{try{c.candidate.candidate.match(/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g).forEach(r)}catch(e){}}})
    /*Usage example*/
    findIP.then(ip => document.write('your ip: ', ip)).catch(e => console.error(e))

    function recordNearbyBeacon(major, minor, pathLossVs1m) { ... }
let myBeaconUuid = new Uint8Array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]);

navigator.bluetooth.requestLEScan({
  filters: [{manufacturerId: 0x004C}],
  options: {
    keepRepeatedDevices: true,
  }
}).then(() => {
  navigator.bluetooth.addEventListener('advertisementreceived', event => {
    let appleData = event.manufacturerData.get(0x004C);
    if (appleData.byteLength != 23 ||
        appleData.getUint16(0, false) !== 0x0215) {
      // Isnâ€™t an iBeacon.
      return;
    }
    let uuidArray = new Uint8Array(appleData.buffer, 2, 16);
    for (let i = 0; i < 16; i++) {
      if (uuidArray[i] != myBeaconUuid[i]) {
        // Not my class of beacon.
        return;
      }
    }
    let major = appleData.getUint16(18, false);
    let minor = appleData.getUint16(20, false);
    let txPowerAt1m = -appleData.getInt8(22);
    let pathLossVs1m = txPowerAt1m - event.rssi;

    recordNearbyBeacon(major, minor, pathLossVs1m);
  });
})

    document.write('major ',major);

</script>

</body>
</html>
